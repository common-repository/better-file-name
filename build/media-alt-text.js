(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;e.n(t)()((()=>{const e=async function(e){const t=e.target,a=t.getAttribute("data-media-id"),i=document.querySelector("#attachment-details-two-column-alt-text");t.style.display="none";const n=t.parentNode.querySelector(".spinner"),o=t.parentNode.querySelector(".generate-alt-text__loading");n.style.visibility="visible",o.classList.remove("hidden");const d=i.value;if(betterFileName?.api)try{const e=await fetch(betterFileName.api,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":betterFileName.nonce},body:JSON.stringify({mediaId:a,altText:d})}),t=await e.json();if(t.alt_text){i.value=t.alt_text;const e=new Event("change",{bubbles:!0,cancelable:!0});i.dispatchEvent(e)}}catch(e){console.error("Error:",e)}finally{o.classList.add("hidden"),n.style.visibility="hidden",t.style.display="inline-block"}};function t(){const t=document.querySelector(".generate-alt-text");t&&t.addEventListener("click",e)}const a=wp.media.view.Modal;wp.media.view.Modal=wp.media.view.Modal.extend({open(){a.prototype.open.apply(this),t()}});const i=wp.media.view.MediaFrame.EditAttachments;wp.media.view.MediaFrame.EditAttachments=wp.media.view.MediaFrame.EditAttachments.extend({rerender(){i.prototype.rerender.apply(this,arguments),t()}})}))})();