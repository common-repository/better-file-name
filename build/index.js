(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.components,a=window.wp.data,r=window.wp.element,o=window.wp.hooks,i=window.wp.i18n,l=window.wp.apiFetch;var d=e.n(l);const c=()=>{const[e,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[p,s]=(0,r.useState)(null),{postTitle:m,postContent:u}=(0,a.useSelect)((e=>({postTitle:e("core/editor").getEditedPostAttribute("title"),postContent:e("core/editor").getEditedPostAttribute("content")}))),{editPost:w}=(0,a.useDispatch)("core/editor");return(0,t.createElement)("div",{style:{marginBlockStart:"16px"}},(0,t.createElement)(n.TextareaControl,{label:"Enter Additional prompt",value:e,help:(0,i.__)("To generate a better image, you can enter additional prompt here in addition to title and content.","better-file-name"),onChange:e=>o(e)}),(0,t.createElement)(n.Button,{isPrimary:!0,onClick:async()=>{c(!0),s(null);try{const t=await d()({path:"/better-file-name/v1/dalle-generate-image",method:"POST",headers:{"Content-Type":"application/json"},data:{prompt:e,postTitle:m,postContent:u}});t?.attachment_id&&w({featured_media:t.attachment_id})}catch(e){e?.error&&s(e.error)}finally{c(!1)}},disabled:l},l?(0,t.createElement)(n.Spinner,null):(0,i.__)("Generate Image","better-file-name")),p&&(0,t.createElement)("div",{style:{color:"red",marginBlockStart:"10px"}},p))};(0,o.addFilter)("editor.PostFeaturedImage","better-file-name/dalle-integration",(e=>n=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,{...n,hint:"Override by featured video."}),(0,t.createElement)(c,null))),10)})();